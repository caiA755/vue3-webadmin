{"ast":null,"code":"// import { createRouter } from \"vue-router\";\nimport { createRouter, createWebHistory } from \"vue-router\";\n\nfunction mapMenusToRouter(userMenus) {\n  const routes = []; // 默认加载所有的routes\n\n  const allRoutes = []; //require.context()属于webpack的工具 可以加载整个文件夹\n\n  const routerFiles = require.context(\"../router/main\", true, /\\.js/);\n\n  routerFiles.keys().forEach(key => {\n    const route = require(\"../router/main\" + key.split('.')[1]);\n\n    allRoutes.push(route.default);\n  }); // console.log(\"所有main下面的路由\", allRoutes);\n  //根据菜单获取需要加载的routes\n  //type==3->url->route\n  //type==1->children-->type===2\n\n  function _recurseGetRoute(mainmenus) {\n    // console.log(\"1mainmenus\", mainmenus);\n    // if (typeof mainmenus == \"undefined\") {\n    //     return false;\n    // }\n    for (let menu of mainmenus) {\n      // for (let i = 0; i < 5; i++) {\n      if (menu.type === 3 || menu.type == 2) {\n        const route = allRoutes.find(route => {\n          return route.path === menu.url;\n        });\n\n        if (route) {\n          routes.push(route);\n        }\n      }\n\n      if (menu.type === 1) {\n        _recurseGetRoute(menu.children);\n      }\n    } // }\n\n  } // console.log(\"usermenus\", userMenus);\n\n\n  _recurseGetRoute(userMenus); // console.log(\"routers\", routes);\n  // console.log(routes);\n\n\n  return routes;\n} // function _recurseGetRoute(mainmenus) {\n//     console.log(\"1mainmenus\", mainmenus);\n//     if (typeof mainmenus == \"undefined\") {\n//         return;\n//     }\n//     for (let menu of mainmenus) {\n//         // for (let i = 0; i < 5; i++) {\n//         if (menu.type === 3) {\n//             const route = allRoutes.find((route) => {\n//                 route.url = menu.url;\n//             });\n//             if (route) {\n//                 routers.push(route);\n//             }\n//         } else {\n//             _recurseGetRoute(menu.children);\n//         }\n//     }\n//     // }\n// }\n// function getRouters(usermenus) {\n//     const routers = createRouter({\n//         history: createWebHistory,\n//         routes: mapMenusToRouter(usermenus)\n//     })\n// }\n\n\nexport default mapMenusToRouter;","map":{"version":3,"names":["createRouter","createWebHistory","mapMenusToRouter","userMenus","routes","allRoutes","routerFiles","require","context","keys","forEach","key","route","split","push","default","_recurseGetRoute","mainmenus","menu","type","find","path","url","children"],"sources":["E:/CaiCai/前端学习/Vue学习/job-web-vue3/src/utils/map_menus.js"],"sourcesContent":["// import { createRouter } from \"vue-router\";\r\nimport { createRouter, createWebHistory } from \"vue-router\"\r\n\r\nfunction mapMenusToRouter(userMenus) {\r\n    const routes = [];\r\n    // 默认加载所有的routes\r\n    const allRoutes = [];\r\n    //require.context()属于webpack的工具 可以加载整个文件夹\r\n    const routerFiles = require.context(\"../router/main\", true, /\\.js/);\r\n    routerFiles.keys().forEach((key) => {\r\n        const route = require(\"../router/main\" + key.split('.')[1])\r\n        allRoutes.push(route.default);\r\n    });\r\n    // console.log(\"所有main下面的路由\", allRoutes);\r\n    //根据菜单获取需要加载的routes\r\n    //type==3->url->route\r\n    //type==1->children-->type===2\r\n    function _recurseGetRoute(mainmenus) {\r\n        // console.log(\"1mainmenus\", mainmenus);\r\n        // if (typeof mainmenus == \"undefined\") {\r\n        //     return false;\r\n        // }\r\n        for (let menu of mainmenus) {\r\n            // for (let i = 0; i < 5; i++) {\r\n            if (menu.type === 3 || menu.type == 2) {\r\n                const route = allRoutes.find((route) => {\r\n                    return route.path === menu.url;\r\n                });\r\n                if (route) {\r\n                    routes.push(route);\r\n                }\r\n            }\r\n            if (menu.type === 1) {\r\n                _recurseGetRoute(menu.children);\r\n            }\r\n        }\r\n        // }\r\n    }\r\n    // console.log(\"usermenus\", userMenus);\r\n    _recurseGetRoute(userMenus);\r\n    // console.log(\"routers\", routes);\r\n    // console.log(routes);\r\n    return routes;\r\n}\r\n\r\n// function _recurseGetRoute(mainmenus) {\r\n//     console.log(\"1mainmenus\", mainmenus);\r\n//     if (typeof mainmenus == \"undefined\") {\r\n//         return;\r\n//     }\r\n//     for (let menu of mainmenus) {\r\n//         // for (let i = 0; i < 5; i++) {\r\n//         if (menu.type === 3) {\r\n//             const route = allRoutes.find((route) => {\r\n//                 route.url = menu.url;\r\n//             });\r\n//             if (route) {\r\n//                 routers.push(route);\r\n//             }\r\n//         } else {\r\n\r\n//             _recurseGetRoute(menu.children);\r\n//         }\r\n//     }\r\n//     // }\r\n// }\r\n// function getRouters(usermenus) {\r\n//     const routers = createRouter({\r\n//         history: createWebHistory,\r\n//         routes: mapMenusToRouter(usermenus)\r\n//     })\r\n// }\r\nexport default mapMenusToRouter"],"mappings":"AAAA;AACA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;;AAEA,SAASC,gBAAT,CAA0BC,SAA1B,EAAqC;EACjC,MAAMC,MAAM,GAAG,EAAf,CADiC,CAEjC;;EACA,MAAMC,SAAS,GAAG,EAAlB,CAHiC,CAIjC;;EACA,MAAMC,WAAW,GAAGC,OAAO,CAACC,OAAR,CAAgB,gBAAhB,EAAkC,IAAlC,EAAwC,MAAxC,CAApB;;EACAF,WAAW,CAACG,IAAZ,GAAmBC,OAAnB,CAA4BC,GAAD,IAAS;IAChC,MAAMC,KAAK,GAAGL,OAAO,CAAC,mBAAmBI,GAAG,CAACE,KAAJ,CAAU,GAAV,EAAe,CAAf,CAApB,CAArB;;IACAR,SAAS,CAACS,IAAV,CAAeF,KAAK,CAACG,OAArB;EACH,CAHD,EANiC,CAUjC;EACA;EACA;EACA;;EACA,SAASC,gBAAT,CAA0BC,SAA1B,EAAqC;IACjC;IACA;IACA;IACA;IACA,KAAK,IAAIC,IAAT,IAAiBD,SAAjB,EAA4B;MACxB;MACA,IAAIC,IAAI,CAACC,IAAL,KAAc,CAAd,IAAmBD,IAAI,CAACC,IAAL,IAAa,CAApC,EAAuC;QACnC,MAAMP,KAAK,GAAGP,SAAS,CAACe,IAAV,CAAgBR,KAAD,IAAW;UACpC,OAAOA,KAAK,CAACS,IAAN,KAAeH,IAAI,CAACI,GAA3B;QACH,CAFa,CAAd;;QAGA,IAAIV,KAAJ,EAAW;UACPR,MAAM,CAACU,IAAP,CAAYF,KAAZ;QACH;MACJ;;MACD,IAAIM,IAAI,CAACC,IAAL,KAAc,CAAlB,EAAqB;QACjBH,gBAAgB,CAACE,IAAI,CAACK,QAAN,CAAhB;MACH;IACJ,CAlBgC,CAmBjC;;EACH,CAlCgC,CAmCjC;;;EACAP,gBAAgB,CAACb,SAAD,CAAhB,CApCiC,CAqCjC;EACA;;;EACA,OAAOC,MAAP;AACH,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,eAAeF,gBAAf"},"metadata":{},"sourceType":"module"}