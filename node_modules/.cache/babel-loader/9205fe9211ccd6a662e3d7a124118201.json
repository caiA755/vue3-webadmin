{"ast":null,"code":"// import NavMenu from '@/components/nav_menu'\nimport localCache from '@/utils/cache';\nimport { Flag } from '@element-plus/icons-vue';\nimport { getCurrentInstance } from \"vue\";\nimport mapMenusToRouter from '@/utils/map_menus.js';\nimport pathMapToMenu from '@/utils/path_menus.js';\nimport router from '@/router';\nimport { toRaw } from '@vue/reactivity';\nimport { RouteRecordRaw } from 'vue-router';\nexport default {\n  props: {\n    width: String\n  },\n\n  data() {\n    return {\n      iscollapse: false,\n      userMenus: localCache.getCache(\"menuinfo\"),\n      isShow: true,\n      defaultvalue: 'v5DBVVVJ'\n    };\n  },\n\n  created() {\n    let menus = Array.from(toRaw(this.userMenus));\n    let routes = mapMenusToRouter(menus);\n\n    for (var i = 0; i < routes.length; i++) {\n      router.options.routes.push(routes[i]);\n      router.addRoute('main', routes[i]);\n      console.log(router);\n      const currentPath = this.$route.path; //  console.log(\"当前的菜单\",menus)\n\n      const currentMenu = pathMapToMenu(menus, currentPath); //  console.log(currentMenu);\n\n      if (typeof currentMenu === \"undefined\") {\n        return null;\n      } else {\n        this.defaultvalue = currentMenu.objectId;\n      }\n    }\n  },\n\n  methods: {\n    menuItemClick(item) {\n      console.log(item.url);\n      this.$router.push({\n        path: `${item.url}`\n      });\n    }\n\n  },\n  emits: [\"success\"],\n\n  setup(props, {\n    emit\n  }) {\n    let instance = getCurrentInstance();\n\n    const select = () => {\n      if (instance.data.iscollapse) {\n        emit('success', '270px');\n        instance.data.iscollapse = false;\n        instance.data.isShow = true;\n      } else {\n        emit('success', '100px');\n        instance.data.iscollapse = true;\n        instance.data.isShow = false;\n      }\n    };\n\n    return {\n      select\n    };\n  }\n\n};","map":null,"metadata":{},"sourceType":"module"}