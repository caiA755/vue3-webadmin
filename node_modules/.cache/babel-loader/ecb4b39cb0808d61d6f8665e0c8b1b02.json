{"ast":null,"code":"import { reactive } from 'vue';\nexport default {\n  props: {\n    formItems: {\n      type: Array,\n      default: () => {//数据和对象类型 写默认值要用箭头函数\n      }\n    }\n  },\n\n  data() {\n    return {\n      date: '',\n      beginDate: '',\n      endDate: ''\n    };\n  },\n\n  mounted() {\n    $('.daterangepicker').dateRangePicker({\n      autoClose: true,\n      format: 'YYYY-MM-DD'\n    }).bind('datepicker-change', this.setDate); //插件自带方法，选择日期后触发回调\n  },\n\n  methods: {\n    setDate() {\n      let datepicker = this.$refs.datepicker; //这一步是关键，具体说明可以参见vue api手册\n\n      this.$set(this.date, 'beginDate', datepicker.value);\n      this.$set(this.date, 'endDate', datepicker.value);\n      this.beginDate = this.date.beginDate.slice(0, 11);\n      this.endDate = this.date.endDate.slice(-10);\n    }\n\n  },\n  watch: {\n    // 这里就可以监听数据变化啦，可以愉快的选择日期了！\n    beginDate(newVal, oldVal) {\n      this.$emit('beginDateChange', newVal);\n    },\n\n    endDate(newVal, oldVal) {\n      this.$emit('endDateChange', newVal);\n    }\n\n  },\n\n  setup() {\n    const change = e => {\n      this.$forceUpdate();\n    };\n\n    return {\n      change\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAwCA,SAAQA,QAAR,QAAuB,KAAvB;AACA,eAAe;EACbC,KAAK,EAAC;IACJC,SAAS,EAAC;MACNC,IAAI,EAACC,KADC;MAENC,OAAO,EAAC,MAAI,CACT;MAEH;IALM;EADN,CADO;;EAUbC,IAAI,GAAE;IACJ,OAAO;MACHC,IAAI,EAAE,EADH;MAELC,SAAS,EAAE,EAFN;MAGLC,OAAO,EAAE;IAHJ,CAAP;EAKD,CAhBY;;EAiBbC,OAAM,GAAK;IACXC,CAAC,CAAC,kBAAD,CAAD,CAAsBC,eAAtB,CAAsC;MACpCC,SAAS,EAAE,IADyB;MAEpCC,MAAM,EAAE;IAF4B,CAAtC,EAGGC,IAHH,CAGQ,mBAHR,EAG6B,KAAKC,OAHlC,EADW,CAIgC;EAC3C,CAtBa;;EAuBfC,OAAO,EAAE;IACPD,OAAO,GAAG;MACR,IAAIE,UAAS,GAAI,KAAKC,KAAL,CAAWD,UAA5B,CADQ,CAER;;MACA,KAAKE,IAAL,CAAU,KAAKb,IAAf,EAAqB,WAArB,EAAkCW,UAAU,CAACG,KAA7C;MACA,KAAKD,IAAL,CAAU,KAAKb,IAAf,EAAqB,SAArB,EAAgCW,UAAU,CAACG,KAA3C;MACA,KAAKb,SAAL,GAAiB,KAAKD,IAAL,CAAUC,SAAV,CAAoBc,KAApB,CAA0B,CAA1B,EAA6B,EAA7B,CAAjB;MACA,KAAKb,OAAL,GAAe,KAAKF,IAAL,CAAUE,OAAV,CAAkBa,KAAlB,CAAwB,CAAC,EAAzB,CAAf;IACF;;EARO,CAvBM;EAiCbC,KAAK,EAAE;IACP;IACCf,SAAS,CAACgB,MAAD,EAASC,MAAT,EAAiB;MACxB,KAAKC,KAAL,CAAY,iBAAZ,EAA+BF,MAA/B;IACD,CAJK;;IAKNf,OAAO,CAACe,MAAD,EAASC,MAAT,EAAiB;MACtB,KAAKC,KAAL,CAAY,eAAZ,EAA6BF,MAA7B;IACF;;EAPM,CAjCM;;EA0CbG,KAAK,GAAE;IACL,MAAMC,MAAK,GAAKC,CAAD,IAAO;MACpB,KAAKC,YAAL;IACD,CAFD;;IAGA,OAAO;MAACF;IAAD,CAAP;EACF;;AA/Ca,CAAf","names":["reactive","props","formItems","type","Array","default","data","date","beginDate","endDate","mounted","$","dateRangePicker","autoClose","format","bind","setDate","methods","datepicker","$refs","$set","value","slice","watch","newVal","oldVal","$emit","setup","change","e","$forceUpdate"],"sourceRoot":"","sources":["E:\\CaiCai\\前端学习\\Vue学习\\job-web-vue3\\src\\base-ui\\src\\form.vue"],"sourcesContent":["<template>\r\n  <div class=\"cai-form\">\r\n     <el-form label-width=\"100px\">\r\n        <el-row>\r\n            <template v-for=\"item in formItems\" :key=\"item.label\">\r\n                <el-col :span=\"8\">\r\n                    <el-form-item :label=\"item.label\">\r\n                        <template v-if=\"item.type=='input'\">\r\n                           <el-input @input=\"change($event)\" :placeholder=\"item.placeholder\"/>\r\n                        </template>\r\n                        <template v-else-if=\"item.type=='select'\">\r\n                           <el-select @select=\"change($event)\" :placeholder=\"item.placeholder\">\r\n                              <el-option v-for=\"opt in item.options\" :value=\"opt.value\" :key=\"opt.value\">\r\n                                    {{opt.title}}\r\n                              </el-option>\r\n                           </el-select>\r\n                        </template>\r\n                        <template v-else-if=\"item.type=='datepicker'\">\r\n                               <!-- <el-date-picker  @calendar-change=\"change($event)\"  ></el-date-picker>\r\n                                <el-date-picker  @calendar-change=\"change($event)\"  ></el-date-picker> -->\r\n                                <div class=\"block\">\r\n                                <!-- <span class=\"demonstration\">Start date time 12:00:00</span> -->\r\n                                <el-date-picker ref=\"datepicker\" class=\"daterangepicker\"\r\n                                type=\"datetimerange\"\r\n                                start-placeholder=\"开始日期\"\r\n                                end-placeholder=\"结束日期\"\r\n                                :default-time=\"defaultTime1\"\r\n                                @calendar-change=\"change($event)\"\r\n                                />\r\n                            </div>\r\n                             </template>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </template>\r\n        </el-row>\r\n     </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {reactive} from 'vue'\r\nexport default {\r\n  props:{\r\n    formItems:{\r\n        type:Array,\r\n        default:()=>{\r\n           //数据和对象类型 写默认值要用箭头函数\r\n\r\n        }\r\n    }\r\n  },\r\n  data(){\r\n    return {\r\n        date: '',\r\n      beginDate: '',\r\n      endDate: ''\r\n    }\r\n  },\r\n  mounted () {\r\n  $('.daterangepicker').dateRangePicker({\r\n    autoClose: true,\r\n    format: 'YYYY-MM-DD'\r\n  }).bind('datepicker-change', this.setDate) //插件自带方法，选择日期后触发回调\r\n },\r\nmethods: {\r\n  setDate() {\r\n    let datepicker = this.$refs.datepicker\r\n    //这一步是关键，具体说明可以参见vue api手册\r\n    this.$set(this.date, 'beginDate', datepicker.value)\r\n    this.$set(this.date, 'endDate', datepicker.value)\r\n    this.beginDate = this.date.beginDate.slice(0, 11)\r\n    this.endDate = this.date.endDate.slice(-10)\r\n  }  \r\n },\r\n  watch: {\r\n  // 这里就可以监听数据变化啦，可以愉快的选择日期了！\r\n   beginDate(newVal, oldVal) {\r\n     this.$emit( 'beginDateChange', newVal )\r\n   },\r\n   endDate(newVal, oldVal) {\r\n     this.$emit( 'endDateChange', newVal )\r\n   }\r\n  },\r\n  setup(){\r\n    const change = (e) => {\r\n      this.$forceUpdate();\r\n    };\r\n    return {change}\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}