{"ast":null,"code":"import caiform from '@/base-ui/index';\nimport mytable from '@/components/my_table/index';\nimport cRequest1 from '@/service/index';\nimport { ref } from 'vue';\nimport mainurl from '@/service/url/mainurl';\nexport default {\n  name: 'role',\n  components: {\n    caiform,\n    mytable\n  },\n\n  data() {\n    let tableData, childrenData;\n    let columns = [{\n      prop: \"objectId\",\n      name: \"objectId\"\n    }, //  {\n    //    prop:\"role_id\",\n    //    name:\"角色名\",\n    //    children:\"name\"\n    //  },\n    {\n      prop: \"name\",\n      name: \"角色名\"\n    }, //   {\n    //    prop:\"menu_id\",\n    //    name:\"权限\",\n    //    children:\"name\"\n    //  },\n    {\n      prop: \"createdAt\",\n      name: \"创建时间\"\n    }, {\n      prop: \"updatedAt\",\n      name: \"更新时间\"\n    }, {\n      prop: \"objectId\",\n      name: \"操作\",\n      slotname: \"objectId\",\n      minWidth: 300\n    }];\n    let childrenColumns = [{\n      prop: \"objectId\",\n      name: \"objectId\"\n    }, {\n      prop: \"role_id\",\n      name: \"角色名\",\n      children: \"name\",\n      slotname: \"role_id\"\n    }, {\n      prop: \"createdAt\",\n      name: \"创建时间\"\n    }, {\n      prop: \"updatedAt\",\n      name: \"更新时间\"\n    }, {\n      prop: \"objectId\",\n      name: \"操作\",\n      slotname: \"objectId\",\n      minWidth: 300\n    }];\n    let pageParams = {\n      page: 1,\n      limit: 5,\n      total: 7\n    };\n    return {\n      tableData,\n      columns,\n      pageParams,\n      childrenColumns,\n      childrenData\n    };\n  },\n\n  created() {\n    let _this = this; // mainurl.rolemenuUrl+\"?include=role_id,menu_id\"\n\n\n    cRequest1.getRequest(mainurl.roleUrl, null).then(res => {\n      _this.tableData = res.results;\n      console.log(res.results);\n    });\n    cRequest1.getRequest(mainurl.rolemenuUrl + \"?include=role_id,menu_id\", null).then(res => {\n      _this.childrenData = res.results;\n    });\n  },\n\n  setup() {\n    const formItems = [{\n      field: \"name\",\n      label: \"角色名\",\n      placeholder: \"角色名\",\n      type: \"input\"\n    }, {\n      field: \"date\",\n      label: \"创建时间\",\n      placeholder: \"请选择创建时间范围\",\n      type: \"datepicker\",\n      otherOptions: {\n        startPlaceholder: '开始时间',\n        endPlaceholder: '结束时间',\n        type: \"daterange\"\n      }\n    }];\n    const formData = ref({\n      date: \"\",\n      name: \"\"\n    });\n    return {\n      formItems,\n      formData\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["caiform","mytable","cRequest1","ref","mainurl","name","components","data","tableData","childrenData","columns","prop","slotname","minWidth","childrenColumns","children","pageParams","page","limit","total","created","_this","getRequest","roleUrl","then","res","results","console","log","rolemenuUrl","setup","formItems","field","label","placeholder","type","otherOptions","startPlaceholder","endPlaceholder","formData","date"],"sourceRoot":"","sources":["E:\\CaiCai\\前端学习\\Vue学习\\job-web-vue3\\src\\views\\main\\system\\role\\role.vue"],"sourcesContent":["<template>\n  <div class=\"role\">\n     <div class=\"rolesearch search\">\n       <caiform :formItems=\"formItems\" v-model=\"formData\">\n          <template #search>\n            <el-button  type=\"primary\" :icon=\"el-icon-refresh\">重置</el-button>\n            <el-button type=\"primary\" :icon=\"Search\">查询</el-button>\n          </template>\n        </caiform>\n   </div>\n   <div class=\"maincontent\">\n   <div>{{childrenData}}</div>\n     <mytable :tableData=\"tableData\" :columns=\"columns\"  :childrenData=\"childrenData\" :childrenColumns=\"childrenColumns\" :pageParams=\"pageParams\"  :@handleSizeChange=\"handleSizeChange\" :@handleCurrentChange=\"handleCurrentChange\">\n        <template #objectId>\n            <el-button type=\"success\" plain>编辑</el-button>\n            <el-button type=\"success\">删除</el-button>\n        </template>\n     </mytable>\n   </div>\n  </div>\n</template>\n\n<script>\nimport caiform from '@/base-ui/index'\nimport mytable from '@/components/my_table/index'\nimport cRequest1 from '@/service/index'\nimport {ref} from 'vue'\nimport mainurl from '@/service/url/mainurl'\nexport default {\n  name: 'role',\n   components:{\n    caiform,\n    mytable\n  },\n   data(){\n     let tableData,childrenData;\n    let columns=[\n     {\n       prop:\"objectId\",\n       name:\"objectId\"\n     },\n    //  {\n    //    prop:\"role_id\",\n    //    name:\"角色名\",\n    //    children:\"name\"\n    //  },\n      {\n       prop:\"name\",\n       name:\"角色名\",\n     },\n    //   {\n    //    prop:\"menu_id\",\n    //    name:\"权限\",\n    //    children:\"name\"\n    //  },\n     {\n       prop:\"createdAt\",\n       name:\"创建时间\",\n     },\n     {\n       prop:\"updatedAt\",\n       name:\"更新时间\"\n     }\n     ,\n     {\n       prop:\"objectId\",\n       name:\"操作\",\n       slotname:\"objectId\",\n       minWidth:300\n     }\n    ];\n     let childrenColumns=[\n     {\n       prop:\"objectId\",\n       name:\"objectId\"\n     },\n     {\n       prop:\"role_id\",\n       name:\"角色名\",\n       children:\"name\",\n       slotname:\"role_id\"\n     },\n     {\n       prop:\"createdAt\",\n       name:\"创建时间\",\n     },\n     {\n       prop:\"updatedAt\",\n       name:\"更新时间\"\n     }\n     ,\n     {\n       prop:\"objectId\",\n       name:\"操作\",\n       slotname:\"objectId\",\n       minWidth:300\n     }\n    ];\n    let pageParams={\n          page:1,\n          limit:5,\n          total:7\n    }\n    return {tableData,columns,pageParams,childrenColumns,childrenData}\n  },\n  created(){\n        let _this=this;\n        // mainurl.rolemenuUrl+\"?include=role_id,menu_id\"\n        cRequest1.getRequest(mainurl.roleUrl,null).then((res)=>{\n             _this.tableData=res.results;\n             console.log(res.results);\n        });\n        cRequest1.getRequest( mainurl.rolemenuUrl+\"?include=role_id,menu_id\",null).then((res)=>{\n             _this.childrenData=res.results;\n       });\n  },\n  setup() {\n    const formItems=[\n      {\n        field:\"name\",\n        label:\"角色名\",\n        placeholder:\"角色名\",\n        type:\"input\"\n      }  ,\n      {\n        field:\"date\",\n        label:\"创建时间\",\n        placeholder:\"请选择创建时间范围\",\n        type:\"datepicker\",\n        otherOptions:{\n          startPlaceholder:'开始时间',\n          endPlaceholder:'结束时间',\n          type:\"daterange\"\n        }\n       }\n    ];\n    const formData=ref({\n          date:\"\",\n          name:\"\"\n     })\n    return {formItems,formData}\n  }\n}\n</script>\n\n\n<style scoped></style>\n"]},"metadata":{},"sourceType":"module"}